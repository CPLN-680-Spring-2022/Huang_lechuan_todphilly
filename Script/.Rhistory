Civilpct = ((Institutional+Recreation+Utility)/totalpc)*100,
Resipct = (Residential/totalpc)*100,
underpct = ((Agriculture + Wooded + Undeveloped)/totalpc)*100,
Mx_ar_pct = Mix_area/2010000,
Tran_ar_pct = Tran_area/2010000,
Com_area_pct = Com_are/2010000,
Ind_ar_pct = Indu_area/2010000,
Civ_ar_pct = (Ins_area+Recre_area+Util_area)/2010000,
Res_ar_pct = Resi_area/2010000,
under_ar_pct = (agr_area+Under_area+Wood_area)/2010000)
parcel_analysis <- parcel_analysis%>%
mutate(Mixedpct= (MixedUse_yes/totalpc)*100,
Transpct = (Transportation/totalpc)*100,
Commpct = (Commercial/totalpc)*100,
Induspct = (Industrial/totalpc)*100,
Civilpct = ((Institutional+Recreation+Utility)/totalpc)*100,
Resipct = (Residential/totalpc)*100,
underpct = ((Agriculture + Wooded + Undeveloped)/totalpc)*100,
Mx_ar_pct = Mix_area/2010000,
Tran_ar_pct = Tran_area/2010000,
Com_area_pct = Com_area/2010000,
Ind_ar_pct = Indu_area/2010000,
Civ_ar_pct = (Ins_area+Recre_area+Util_area)/2010000,
Res_ar_pct = Resi_area/2010000,
under_ar_pct = (agr_area+Under_area+Wood_area)/2010000)
View(parcel_analysis)
TOD_station_parcel <- merge(DVRPC_railstops, parcel_analysis)
#visualization
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_station_parcel, aes(colour = Mx_ar_pct),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="DVRPC",
caption="Figure xx") +
mapTheme()
View(TOD_station_parcel)
st_write(TOD_station_parcel, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/TODstation_bufferparcel_analysis_weighted_by_area.shp")
#visualization
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_station_parcel, aes(colour = under_ar_pct),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="DVRPC",
caption="Figure xx") +
mapTheme()
View(TOD_station_parcel)
TOD_station_parcel <- merge(DVRPC_railstops, parcel_analysis)%>%
dplyr::select(-Agriculture, -Commercial, -Industrial, -Institutional, -Military, -Recreation,
-Residential, -Transportation, -Undeveloped, -Utility, -Water, -Wooded)
View(TOD_station_parcel)
st_write(TOD_station_parcel, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Station_landuse_analysis.shp")
#visualization
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_station_parcel, aes(colour = under_ar_pct),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Underused Area (Agriculture + Undeveloped + Forest)",
caption="Figure xx") +
mapTheme()
TOD_station_parcel <- merge(DVRPC_railstops, parcel_analysis)%>%
mutate(presi = Resi_area/Residential, pcomm = Com_area/Commercial)%>%
dplyr::select(-Agriculture, -Commercial, -Industrial, -Institutional, -Military, -Recreation,
-Residential, -Transportation, -Undeveloped, -Utility, -Water, -Wooded)
View(TOD_station_parcel)
#visualization
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_station_parcel, aes(colour = pcomm),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Average Commercial Parcel size",
caption="Figure xx") +
mapTheme()
#visualization
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_station_parcel, aes(colour = presi),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Average Commercial Parcel size",
caption="Figure xx") +
mapTheme()
View(TOD_parcel2)
TOD_parcel_buffer2 <- TOD_parcel_buffer%>%
st_drop_geometry()%>%
group_by(ID, lu15subn)%>%
dplyr::summarise(count_parcel = n())
View(TOD_parcel_buffer2)
TOD_parcel_buffer3 <- TOD_parcel_buffer2 %>%
as_tibble()
TOD_parcel_buffer4 <- spread(TOD_parcel_buffer3, key = lu15catn, value = count_parcel)
TOD_parcel_buffer4 <- spread(TOD_parcel_buffer3, key = lu15subn, value = count_parcel)
View(TOD_parcel_buffer4)
TOD_parcel_buffer5 <- TOD_parcel_buffer%>%
st_drop_geometry()%>%
group_by(ID, lu15subn)%>%
dplyr::summarise(type_area = sum(Shape__Are))
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)
TOD_parcel_buffer6 <- TOD_parcel_buffer5 %>%
as_tibble()
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)
View(TOD_parcel_buffer6)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)
View(TOD_parcel_buffer7)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture)
TOD_parcel_buffer8 <- cbind(TOD_parcel_buffer4, TOD_parcel_buffer7)%>%
dplyr::select(-ID.8)
glimpse(TOD_parcel_buffer7)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = Commercial: "Single Large-Site Retail")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail")
View(TOD_parcel_buffer7)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", ""
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
View(TOD_parcel_buffer7)
glimpse(TOD_parcel_buffer7)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::mutate(underdeveloped = (Wooded + "Undeveloped: General" + "Undeveloped: Transitional Land"))%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
TOD_parcel_buffer6[is.na(TOD_parcel_buffer6)] = 0
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::mutate(underdeveloped = (Wooded + "Undeveloped: General" + "Undeveloped: Transitional Land"))%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::mutate(underdeveloped = ("Wooded" + "Undeveloped: General" + "Undeveloped: Transitional Land"))%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::mutate(underdeped = ("Wooded" + "Undeveloped: General" + "Undeveloped: Transitional Land"))%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::mutate(underdeped = "Wooded" + "Undeveloped: General" + "Undeveloped: Transitional Land")%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use")
glimpse(TOD_parcel_buffer7)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use",
water_ar = "Water", fore_ar = "Wooded")%>%
dplyr::mutate(Parking_area = "Parking - Agriculture" + "Parking - Commercial: General")
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15subn, value = type_area)
TOD_parcel_buffer7[is.na(TOD_parcel_buffer7)] = 0
TOD_parcel_buffer7 <- TOD_parcel_buffer7%>%
dplyr::select(-"Commercial: Public Storage", -"Industrial: General", -"Industrial: Mixed-Use", -"Industrial: Warehousing/Distribution/Open Storage",
-"Institutional: Cemetery", -"Institutional: Correctional Facility and Detention Center", -"Military",
-"Recreation: General", -"Recreation: Golf Course",
-"Parking - Utility: Wastewater Treatment", -"Parking - Utility: Recycling", -"Parking - Recreation: Golf Course",
-"Parking - Transportation: Airport", -"Undeveloped: Drainage Basin",
-"Transportation: Airport", -"Transportation: Roadway", -"Transportation: Highway Right-of-Way", -"Transportation: Rail Right-of-Way",
-"Utility: Landfill", -"Utility: Other Facility", -"Utility: Recycling", -"Utility: Right-of-Way", -"Utility: Wastewater Treatment")%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, com_gen_ar = "Commercial: General", com_hotel_ar = "Commercial: Hotel/Motel",
com_mx_ar = "Commercial: Mixed-Use", com_ofc_ar = "Commercial: Office", com_crt_ar = "Commercial: Regional and Community Retail Center",
com_mal_ar = "Commercial: Shopping Mall", com_lrt_ar = "Commercial: Single Large-Site Retail",
rsingle_ar = "Residential: Single-Family Detached", rmulfam_ar = "Residential: Multifamily", rmx_ar = "Residential: Mixed-Use",
water_ar = "Water", fore_ar = "Wooded")%>%
dplyr::mutate(Parking_area = "Parking - Agriculture" + "Parking - Commercial: General")
View(TOD_parcel_buffer7)
glimpse(TOD_parcel_buffer7)
View(TOD_parcel_buffer4)
View(parcel_analysis)
TOD_parcel_buffer7$`Parking - Commercial: Shopping Mall`
sum(TOD_parcel_buffer4$`Parking - Commercial: Shopping Mall`)
glimpse(TOD_parcel_buffer7)
Important_area <- TOD_parcel_buffer7%>%
dplyr::select("ID", "Commercial: Single Large-Site Retail", "Commercial: Mixed-Use", "Institutional: Education",
"Parking - Transportation: Facility", "Parking - Undeveloped: Undetermined Use",
"Residential: Mixed-Use", "Residential: Multifamily", "Residential: Single-Family Detached",
"Undeveloped: General", "Undeveloped: Transitional Land", "Wood")
Important_area <- TOD_parcel_buffer7%>%
dplyr::select("ID", "Commercial: Single Large-Site Retail", "Commercial: Mixed-Use", "Institutional: Education",
"Parking - Transportation: Facility", "Parking - Undeveloped: Undetermined Use",
"Residential: Mixed-Use", "Residential: Multifamily", "Residential: Single-Family Detached",
"Undeveloped: General", "Undeveloped: Transitional Land", "Wooded")
Important <- TOD_parcel_buffer4%>%
dplyr::select("ID", "Commercial: Single Large-Site Retail", "Commercial: Mixed-Use", "Institutional: Education",
"Parking - Transportation: Facility", "Parking - Undeveloped: Undetermined Use",
"Residential: Mixed-Use", "Residential: Multifamily", "Residential: Single-Family Detached",
"Undeveloped: General", "Undeveloped: Transitional Land", "Wooded")
Important <- TOD_parcel_buffer4%>%
dplyr::select("ID", "Commercial: Single Large-Site Retail", "Commercial: Mixed-Use", "Institutional: Education",
"Parking - Transportation: Facility", "Parking - Undeveloped: Undetermined Use",
"Residential: Mixed-Use", "Residential: Multifamily", "Residential: Single-Family Detached",
"Undeveloped: General", "Undeveloped: Transitional Land", "Wooded")%>%
dplyr::rename("ID", com_lgret = "Commercial: Single Large-Site Retail", com_mx = "Commercial: Mixed-Use", edu = "Institutional: Education",
pkin_tran = "Parking - Transportation: Facility", pkin_und = "Parking - Undeveloped: Undetermined Use",
resi_mx = "Residential: Mixed-Use", resi_multi = "Residential: Multifamily", resi_sigle = "Residential: Single-Family Detached",
under_gen = "Undeveloped: General", under_trsit = "Undeveloped: Transitional Land")
Important <- TOD_parcel_buffer4%>%
dplyr::select("ID", "Commercial: Single Large-Site Retail", "Commercial: Mixed-Use", "Institutional: Education",
"Parking - Transportation: Facility", "Parking - Undeveloped: Undetermined Use",
"Residential: Mixed-Use", "Residential: Multifamily", "Residential: Single-Family Detached",
"Undeveloped: General", "Undeveloped: Transitional Land", "Wooded")%>%
dplyr::rename(com_lgret = "Commercial: Single Large-Site Retail", com_mx = "Commercial: Mixed-Use", edu = "Institutional: Education",
pkin_tran = "Parking - Transportation: Facility", pkin_und = "Parking - Undeveloped: Undetermined Use",
resi_mx = "Residential: Mixed-Use", resi_multi = "Residential: Multifamily", resi_sigle = "Residential: Single-Family Detached",
under_gen = "Undeveloped: General", under_trsit = "Undeveloped: Transitional Land")
View(Important)
Important_area <- TOD_parcel_buffer7%>%
dplyr::select(ID.8 = "ID", com_lgret_ar = "Commercial: Single Large-Site Retail", com_mx_ar = "Commercial: Mixed-Use", edu_ar = "Institutional: Education",
pkin_tran_ar = "Parking - Transportation: Facility", pkin_und_ar = "Parking - Undeveloped: Undetermined Use",
resi_mx_ar = "Residential: Mixed-Use", resi_multi_ar = "Residential: Multifamily", resi_sigle_ar = "Residential: Single-Family Detached",
under_gen_ar = "Undeveloped: General", under_trsit_ar = "Undeveloped: Transitional Land")
Important_pc <- cbind(Important, Important_area)%>%
dplyr::select(-ID.8)
View(Important_pc)
TOD_Important_pc <- merge(DVRPC_railstops, Important_pc)
View(TOD_Important_pc)
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_Important_pc, aes(colour = pkin_tran_ar),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Transi Parking Lot Size",
caption="Figure xx") +
mapTheme()
st_write(TOD_Important_pc, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Station_landuse_Important_parcels.shp")
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_Important_pc, aes(colour = com_lgret_ar),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Transi Parking Lot Size",
caption="Figure xx") +
mapTheme()
Important_area <- TOD_parcel_buffer7%>%
dplyr::select(com_lgret_ar = "Commercial: Single Large-Site Retail", com_mx_ar = "Commercial: Mixed-Use", edu_ar = "Institutional: Education",
pkin_tran_ar = "Parking - Transportation: Facility", pkin_und_ar = "Parking - Undeveloped: Undetermined Use",
resi_mx_ar = "Residential: Mixed-Use", resi_multi_ar = "Residential: Multifamily", resi_sigle_ar = "Residential: Single-Family Detached",
under_gen_ar = "Undeveloped: General", under_trsit_ar = "Undeveloped: Transitional Land")
TOD_Important_pc <- merge(DVRPC_railstops, Important_area)%>%
mutate(large_comm = com_lgret_ar+)
TOD_Important_pc <- merge(DVRPC_railstops, Important_area)
View(Important_pc)
TOD_Important_pc[is.na(TOD_Important_pc)] = 0
st_write(TOD_Important_pc, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Station_landuse_Important_parcels.shp")
View(TOD_station_parcel)
View(TOD_Important_pc)
View(Important_area)
TOD_Important_pc <- merge(DVRPC_railstops, Important_area)
TOD_Important_pc <- cbind(DVRPC_railstops, Important_area)
TOD_Important_pc[is.na(TOD_Important_pc)] = 0
st_write(TOD_Important_pc, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Station_landuse_Important_parcels.shp")
Important_area <- TOD_parcel_buffer7%>%
dplyr::select(com_lgret_ar = "Commercial: Single Large-Site Retail", com_mx_ar = "Commercial: Mixed-Use", edu_ar = "Institutional: Education",
pkin_tran_ar = "Parking - Transportation: Facility", pkin_und_ar = "Parking - Undeveloped: Undetermined Use",
resi_mx_ar = "Residential: Mixed-Use", resi_multi_ar = "Residential: Multifamily", resi_sigle_ar = "Residential: Single-Family Detached",
under_gen_ar = "Undeveloped: General", under_trsit_ar = "Undeveloped: Transitional Land", Wood_ar = Wooded, Agri_ar = Agriculture)
TOD_Important_pc <- cbind(DVRPC_railstops, Important_area)
st_write(TOD_Important_pc, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Station_landuse_Important_parcels.shp")
TOD_Important_pc <- TOD_Important_pc%>%
mutate(potential = under_gen_ar + under_trsit_ar + Wood_ar + Agri_ar)
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_Important_pc, aes(colour = potential),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Transi Parking Lot Size",
caption="Figure xx") +
mapTheme()
ggplot() +
geom_sf(data=st_union(Study.sf)) +
geom_sf(data=TOD_Important_pc, aes(colour = potential),
show.legend = "point", size = 5) +
labs(title="DVRPC's analysis of Station area",
subtitle="Underused Parcels: Undeveloped + Forest + Agriculture",
caption="Figure xx") +
mapTheme()
write.csv(TOD_Important_pc, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Station_landuse_Important_parcels.csv")
View(TOD_station_parcel)
parcel_analysis <- cbind(TOD_parcel_buffer8, TOD_parcel_mixedtract8)%>%
dplyr::select(-ID.7)
View(parcel_analysis)
parcel_analysis <- cbind(DVRPC_railstops, TOD_parcel_mixedtract8)%>%
dplyr::select(-ID.7)
#mixeduse
TOD_parcel_mixedtract4 <- TOD_parcel_buffer%>%
st_drop_geometry()%>%
group_by(ID, mixeduse)%>%
dplyr::summarise(type_area = sum(Shape__Are))
TOD_parcel_mixedtract5 <- TOD_parcel_mixedtract4 %>%
as_tibble()
TOD_parcel_mixedtract6 <- spread(TOD_parcel_mixedtract5, key = mixeduse, value = type_area)%>%
dplyr::rename(Mix_area = Y,
nomx_area = N)
TOD_parcel_buffer5 <- TOD_parcel_buffer%>%
st_drop_geometry()%>%
group_by(ID, lu15catn)%>%
dplyr::summarise(type_area = sum(Shape__Are))
TOD_parcel_buffer6 <- TOD_parcel_buffer5 %>%
as_tibble()
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15catn, value = type_area)%>%
dplyr::rename(ID.8 = ID, agr_area = Agriculture, Com_area = Commercial, Indu_area = Industrial,
Ins_area = Institutional, Mil_area = Military, Recre_area = Recreation,
Resi_area = Residential, Tran_area = Transportation, Under_area = Undeveloped,
Util_area = Utility, Water_area = Water, Wood_area = Wooded)
#merge
TOD_parcel_buffer8 <- cbind(TOD_parcel_buffer4, TOD_parcel_buffer7)%>%
dplyr::select(-ID.8)
View(TOD_parcel_buffer8)
View(TOD_parcel_buffer7)
#merge
TOD_parcel_buffer8 <- cbind(TOD_parcel_buffer4, TOD_parcel_buffer7)%>%
dplyr::select(-ID.8)
View(TOD_parcel_mixedtract8)
#merge
TOD_parcel_buffer8 <- cbind(TOD_parcel_buffer7, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)
View(TOD_parcel_buffer8)
TOD_parcel_mixedtract6 <- spread(TOD_parcel_mixedtract5, key = mixeduse, value = type_area)%>%
dplyr::rename(ID.8 = ID, Mix_area = Y,
nomx_area = N)
#merge
TOD_parcel_buffer8 <- cbind(TOD_parcel_buffer7, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)
TOD_parcel_mixedtract8 <- cbind(TOD_parcel_mixedtract3, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)%>%
dplyr::rename(ID.7 = ID,
MixedUse_yes = Y, MixedUse_no = N)
TOD_parcel_mixedtract8 <- cbind(TOD_parcel_mixedtract3, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)%>%
dplyr::rename(MixedUse_yes = Y, MixedUse_no = N)
TOD_parcel_buffer7 <- spread(TOD_parcel_buffer6, key = lu15catn, value = type_area)%>%
dplyr::rename(agr_area = Agriculture, Com_area = Commercial, Indu_area = Industrial,
Ins_area = Institutional, Mil_area = Military, Recre_area = Recreation,
Resi_area = Residential, Tran_area = Transportation, Under_area = Undeveloped,
Util_area = Utility, Water_area = Water, Wood_area = Wooded)
#merge
TOD_parcel_buffer8 <- cbind(TOD_parcel_buffer7, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)
Final_parcel_almost <- cbind(TOD_parcel_mixedtract8, Important_area)
View(Final_parcel_almost)
Final_parcel_almost <- cbind(TOD_parcel_mixedtract8, Important_area)%>%
dplyr::select(-MixedUse_yes, -MixedUse_no)
parcel_analysis <- cbind(DVRPC_railstops, Final_parcel_almost)%>%
dplyr::select(-ID.3)
View(parcel_analysis)
parcel_analysis[is.na(parcel_analysis)] = 0
st_write(TOD_station_parcel, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Final_parcel_analysis_area.shp")
View(parcel_analysis)
View(Final_parcel_almost)
#merge
TOD_parcel_mixedtract8 <- cbind(TOD_parcel_buffer7, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)%>%
dplyr::rename(MixedUse_yes = Y, MixedUse_no = N)
#merge
TOD_parcel_mixedtract8 <- cbind(TOD_parcel_buffer7, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)
View(TOD_parcel_mixedtract8)
Final_parcel_almost <- cbind(TOD_parcel_mixedtract8, Important_area)%>%
dplyr::select(-MixedUse_yes, -MixedUse_no)
Final_parcel_almost <- cbind(TOD_parcel_mixedtract8, Important_area)
View(Final_parcel_almost)
Important_area <- TOD_parcel_buffer13%>%
dplyr::select(com_lgret_ar = "Commercial: Single Large-Site Retail", com_mx_ar = "Commercial: Mixed-Use", edu_ar = "Institutional: Education",
pkin_tran_ar = "Parking - Transportation: Facility", pkin_und_ar = "Parking - Undeveloped: Undetermined Use",
resi_mx_ar = "Residential: Mixed-Use", resi_multi_ar = "Residential: Multifamily", resi_sigle_ar = "Residential: Single-Family Detached",
under_gen_ar = "Undeveloped: General", under_trsit_ar = "Undeveloped: Transitional Land")
#important parcels
TOD_parcel_buffer11 <- TOD_parcel_buffer%>%
st_drop_geometry()%>%
group_by(ID, lu15subn)%>%
dplyr::summarise(type_area = sum(Shape__Are))
TOD_parcel_buffer12 <- TOD_parcel_buffer11 %>%
as_tibble()
TOD_parcel_buffer13 <- spread(TOD_parcel_buffer12, key = lu15subn, value = type_area)
Important_area <- TOD_parcel_buffer13%>%
dplyr::select(com_lgret_ar = "Commercial: Single Large-Site Retail", com_mx_ar = "Commercial: Mixed-Use", edu_ar = "Institutional: Education",
pkin_tran_ar = "Parking - Transportation: Facility", pkin_und_ar = "Parking - Undeveloped: Undetermined Use",
resi_mx_ar = "Residential: Mixed-Use", resi_multi_ar = "Residential: Multifamily", resi_sigle_ar = "Residential: Single-Family Detached",
under_gen_ar = "Undeveloped: General", under_trsit_ar = "Undeveloped: Transitional Land")
#merge
TOD_parcel_mixedtract8 <- cbind(TOD_parcel_buffer7, TOD_parcel_mixedtract6)%>%
dplyr::select(-ID.8)
Final_parcel_almost <- cbind(TOD_parcel_mixedtract8, Important_area)
View(Final_parcel_almost)
Final_parcel <- cbind(DVRPC_railstops, Final_parcel_almost)%>%
dplyr::select(-ID.3)
Final_parcel_almost <- cbind(TOD_parcel_mixedtract8, Important_area)%>%
dplyr::rename(ID.f = ID)
Final_parcel <- cbind(DVRPC_railstops, Final_parcel_almost)%>%
dplyr::select(-ID.f)
View(Final_parcel)
Final_parcel[is.na(Final_parcel)] = 0
st_write(Final_parcel, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Final_parcel_analysis_area.shp")
view(Final_parcel$station=="North Philadelphia")
#tweak DVRPC
DVRPC_TOD <- st_read("C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/raw_data/DVRPC_TOD/TOD_Opportunities.shp")
View(DVRPC_TOD)
DVRPC_TOD <- DVRPC_TOD%>%
st_drop_geometry()%>%
dplyr::select(STATION, LINE, Type_1, TCI_Data, Job_Data, Time_Data, Walk_Data,
ResRent_Da, CommRent_D)
DVRPC_TOD <- DVRPC_TOD%>%
st_drop_geometry()%>%
dplyr::select(STATION, LINE, Type_1, TCI_Data, Job_Data, Time_Data, WalK_Data,
ResRent_Da, CommRent_D)
DVRPC_TOD <- DVRPC_TOD%>%
st_drop_geometry()%>%
dplyr::select(STATION, LINE, Type_1, TCI_Data, Job_Data, Time_Data, WalK_Data,
ResRent_Da, CommRent_D)
DVRPC_TOD <- DVRPC_TOD%>%
st_drop_geometry()%>%
dplyr::select(STATION, LINE, Type_1, TCI_Data, Job_Data, Time_Data, Walk_Data,
ResRent_Da, CommRent_D)
DVRPC_TOD <- DVRPC_TOD%>%
st_drop_geometry()%>%
dplyr::select(STATION, LINE, Type_1, TCI_Data, Job_Data, Time_Data, Walk_data,
ResRent_Da, CommRent_D)
write.csv(Final_parcel, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/Final_parcel_analysis_cleaning.csv")
write.csv(DVRPC_TOD, "C:/Users/mnxan/OneDrive/Documents/GitHub/Huang_lechuan_todphilly/cleaned_data/800buffer/DVRPC_cleaning.csv")
